FROM mwaaas/node-nginx:5.11.0-1.8.1-1

ONBUILD COPY . /usr/share/nginx/html

ONBUILD RUN  npm install --only=dev --unsafe-perm=true

ONBUILD RUN npm run tsc

# configure nginx if there is a custom configuration
ONBUILD RUN [ -f ./nginx.conf ] && cp  /usr/share/nginx/html/nginx.conf  /etc/nginx/nginx.conf || echo "Requirements file not found"